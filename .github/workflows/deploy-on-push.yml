name: Deploy on Push

on:
  push:
    branches:
      - main

jobs:
  deploy-dev:
    name: Deploy to Dev
    uses: ./.github/workflows/update.yml
    with:
      environment: dev
    secrets: inherit

  deploy-staging:
    name: Deploy to Staging
    uses: ./.github/workflows/update.yml
    with:
      environment: staging
    secrets: inherit
    needs: deploy-dev

  deploy-production:
    name: Deploy to Production
    uses: ./.github/workflows/update.yml
    with:
      environment: production
    secrets: inherit
    needs: deploy-staging